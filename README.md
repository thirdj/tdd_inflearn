<<<<<<< HEAD
/**
 * 어플리케이션
 * 1. 익스프레스 인스턴스를 어플리케이션이라고 한다.
 * 2. 서버에 필요한 기능인 미들웨어를 어플리케이션에 추가한다.
 * 3. 라우팅 설정을 할 수 있다.
 * 4. 서버를 요청 대기 상태로 만들수 있다.
 */

/**
 * 미들웨어
 * 1. 미들웨어는 함수들의 연속이다.
 * 2. 로깅 미들웨어를 만들어 보자.
 * 3. 써드파티 미들웨어를 사용해 보자.
 * 4. 일반 미들웨어 vs 에러 미들웨어
 * 5. 404, 500 에러 미들웨어를 만들어 보자.
 * 6. 미들웨어는 3개의 인자를 가짐.
 * 7. 미들웨어는 자기 역할을 다 한 다음에 next 를 호출 해줘야 다른 미들웨어들이 호출 됨.
 */

/**
 * 라우팅
 * 1. 요청 URL에 대해 적절한 핸들러 함수로 연결해 주는 기능.
 * 2. 어플리케이션의 get(), post() 메소드로 구현할 수 있음.
 * 3. 라우팅을 위한 전용 Router 클래스를 사용할 수도 있다.
 */

/** 테스트 주도 개발
 - mocha
  - 테스트 코드를 돌려주는 테스트 러너
  - 테스트 수트: 테스트 환경으로 모카에서는 describe() 으로 구혆나다.
  - 테스트 케이스: 실제 테스트를 말하며 모카에서는 it()으로 구현한다.
  - 실행은 $ node_modules/mocha/bin/mocha *.spec.js
 - should
  - https://github.com/tj/should.js/
  - 노드 assert 말고 서드파티 라이브러리를 사용해라.
  - should 는 검증(assertion) 라이브러리다.
  - 가독성 높은 테스트 코드를 만들 수 있다.
 - superTest
  - 단위 테스트: 함수의 기능 테스트
  - 통합 테스트: API의 기능 테스트
  - 슈퍼 테스트는 익스프레스 통합 테스트용 라이브러리이다.
  - 내부적으로 익스프레스 서버를 구동시켜 실제 요청을 보낸 뒤 결과를 검증한다.

describe === test suite
it === test case


** 첫 API 테스트 만들기
  성공
    유저 객체를 담은 배열로 응답한다
    최대 limit 갯수만큼 응답한다

  실패
    limit이 숫자형이 아니면 400을 응답한다
    offset이 숫자형이 아니면 400을 응답한다

  supertest 는 상태코드를 검증하는 validate 를 제공 함.
    - expect(200||400)
      .end(done); // 콜백과 동일

/*
  // API 서버는 비동기.
  // 두번째 param 으로 비동기 처리.
  it('..', done => {
    supertest(app)
      .get('/users')
      .end((err, res) => {
        // res 는 res.json 값이 내려옴.
        console.log('res.body ', res.body);

        // 비동기라 호출 해줌.
        // 호출 하지 않으면 끝났는지 파악이 안되서 에러를 냄.
        // ? 그럼 하나 테스트 할 때 마다 done 호출 해야 하는건가..??
        done();
      });
  });
*/

POST /users
success
  - 201 상태코드를 반환한다.
  - 생성된 유저 객체를 반환한다.
  - 입력한 name을 반환한다.

error
  - name 파라미터 누락시 400을 반환한다.
  - name이 중복일 경우 409를 반환한다.

  // body 를 지원하지 않아 bodyParser 사용해야함.
  // multer 는 이미지나 영상등 큰 데이터를 처리할 때 사용 함.

PUT /users/:id
success
  - 변경된 name 을 응답한다.

error
  - 정수가 아닌 id일 경우 400 응답
  - name이 없을 경우 400 응답
  - 없는 유저일 경우 404 응답
  - 이름이 중복일 경우 409 응답
=======
# tdd_inflearn
node.js 로 배우는 tdd
>>>>>>> 07ff7cdd8e1c441eab131d88efd490470062f1df
